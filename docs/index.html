<!doctype html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />

    <title>birdears API documentation</title>
    <meta name="description" content="" />

  <link href='https://fonts.googleapis.com/css?family=Inconsolata:400,700|Old+Standard+TT:400,400i,700|Open+Sans+Condensed:300,300i,700|Oswald:200,300,400,500,600,700|Roboto+Condensed:300,300i,400,400i,700,700i|Roboto:100,100i,300,300i,400,400i,500,500i,700,700i,900,900i&subset=greek,latin-ext' rel='stylesheet' type='text/css'>
  
  <style type="text/css">
  
* {
  box-sizing: border-box;
}
/*! normalize.css v1.1.1 | MIT License | git.io/normalize */

/* ==========================================================================
   HTML5 display definitions
   ========================================================================== */

/**
 * Correct `block` display not defined in IE 6/7/8/9 and Firefox 3.
 */

article,
aside,
details,
figcaption,
figure,
footer,
header,
hgroup,
main,
nav,
section,
summary {
    display: block;
}

/**
 * Correct `inline-block` display not defined in IE 6/7/8/9 and Firefox 3.
 */

audio,
canvas,
video {
    display: inline-block;
    *display: inline;
    *zoom: 1;
}

/**
 * Prevent modern browsers from displaying `audio` without controls.
 * Remove excess height in iOS 5 devices.
 */

audio:not([controls]) {
    display: none;
    height: 0;
}

/**
 * Address styling not present in IE 7/8/9, Firefox 3, and Safari 4.
 * Known issue: no IE 6 support.
 */

[hidden] {
    display: none;
}

/* ==========================================================================
   Base
   ========================================================================== */

/**
 * 1. Prevent system color scheme's background color being used in Firefox, IE,
 *    and Opera.
 * 2. Prevent system color scheme's text color being used in Firefox, IE, and
 *    Opera.
 * 3. Correct text resizing oddly in IE 6/7 when body `font-size` is set using
 *    `em` units.
 * 4. Prevent iOS text size adjust after orientation change, without disabling
 *    user zoom.
 */

html {
    background: #fff; /* 1 */
    color: #000; /* 2 */
    font-size: 100%; /* 3 */
    -webkit-text-size-adjust: 100%; /* 4 */
    -ms-text-size-adjust: 100%; /* 4 */
}

/**
 * Address `font-family` inconsistency between `textarea` and other form
 * elements.
 */

html,
button,
input,
select,
textarea {
    font-family: sans-serif;
}

/**
 * Address margins handled incorrectly in IE 6/7.
 */

body {
    margin: 0;
}

/* ==========================================================================
   Links
   ========================================================================== */

/**
 * Address `outline` inconsistency between Chrome and other browsers.
 */

a:focus {
    outline: thin dotted;
}

/**
 * Improve readability when focused and also mouse hovered in all browsers.
 */

a:active,
a:hover {
    outline: 0;
}

/* ==========================================================================
   Typography
   ========================================================================== */

/**
 * Address font sizes and margins set differently in IE 6/7.
 * Address font sizes within `section` and `article` in Firefox 4+, Safari 5,
 * and Chrome.
 */

h1 {
    font-size: 2em;
    margin: 0.67em 0;
}

h2 {
    font-size: 1.5em;
    margin: 0.83em 0;
}

h3 {
    font-size: 1.17em;
    margin: 1em 0;
}

h4 {
    font-size: 1em;
    margin: 1.33em 0;
}

h5 {
    font-size: 0.83em;
    margin: 1.67em 0;
}

h6 {
    font-size: 0.67em;
    margin: 2.33em 0;
}

/**
 * Address styling not present in IE 7/8/9, Safari 5, and Chrome.
 */

abbr[title] {
    border-bottom: 1px dotted;
}

/**
 * Address style set to `bolder` in Firefox 3+, Safari 4/5, and Chrome.
 */

b,
strong {
    font-weight: bold;
}

blockquote {
    margin: 1em 40px;
}

/**
 * Address styling not present in Safari 5 and Chrome.
 */

dfn {
    font-style: italic;
}

/**
 * Address differences between Firefox and other browsers.
 * Known issue: no IE 6/7 normalization.
 */

hr {
    -moz-box-sizing: content-box;
    box-sizing: content-box;
    height: 0;
}

/**
 * Address styling not present in IE 6/7/8/9.
 */

mark {
    background: #ff0;
    color: #000;
}

/**
 * Address margins set differently in IE 6/7.
 */

p,
pre {
    margin: 1em 0;
}

/**
 * Correct font family set oddly in IE 6, Safari 4/5, and Chrome.
 */

code,
kbd,
pre,
samp {
    font-family: monospace, serif;
    _font-family: 'courier new', monospace;
    font-size: 1em;
}

/**
 * Improve readability of pre-formatted text in all browsers.
 */

pre {
    white-space: pre;
    white-space: pre-wrap;
    word-wrap: break-word;
}

/**
 * Address CSS quotes not supported in IE 6/7.
 */

q {
    quotes: none;
}

/**
 * Address `quotes` property not supported in Safari 4.
 */

q:before,
q:after {
    content: '';
    content: none;
}

/**
 * Address inconsistent and variable font size in all browsers.
 */

small {
    font-size: 80%;
}

/**
 * Prevent `sub` and `sup` affecting `line-height` in all browsers.
 */

sub,
sup {
    font-size: 75%;
    line-height: 0;
    position: relative;
    vertical-align: baseline;
}

sup {
    top: -0.5em;
}

sub {
    bottom: -0.25em;
}

/* ==========================================================================
   Lists
   ========================================================================== */

/**
 * Address margins set differently in IE 6/7.
 */

dl,
menu,
ol,
ul {
    margin: 1em 0;
}

dd {
    margin: 0 0 0 40px;
}

/**
 * Address paddings set differently in IE 6/7.
 */

menu,
ol,
ul {
    padding: 0 0 0 40px;
}

/**
 * Correct list images handled incorrectly in IE 7.
 */

nav ul,
nav ol {
    list-style: none;
    list-style-image: none;
}

/* ==========================================================================
   Embedded content
   ========================================================================== */

/**
 * 1. Remove border when inside `a` element in IE 6/7/8/9 and Firefox 3.
 * 2. Improve image quality when scaled in IE 7.
 */

img {
    border: 0; /* 1 */
    -ms-interpolation-mode: bicubic; /* 2 */
}

/**
 * Correct overflow displayed oddly in IE 9.
 */

svg:not(:root) {
    overflow: hidden;
}

/* ==========================================================================
   Figures
   ========================================================================== */

/**
 * Address margin not present in IE 6/7/8/9, Safari 5, and Opera 11.
 */

figure {
    margin: 0;
}

/* ==========================================================================
   Forms
   ========================================================================== */

/**
 * Correct margin displayed oddly in IE 6/7.
 */

form {
    margin: 0;
}

/**
 * Define consistent border, margin, and padding.
 */

fieldset {
    border: 1px solid #c0c0c0;
    margin: 0 2px;
    padding: 0.35em 0.625em 0.75em;
}

/**
 * 1. Correct color not being inherited in IE 6/7/8/9.
 * 2. Correct text not wrapping in Firefox 3.
 * 3. Correct alignment displayed oddly in IE 6/7.
 */

legend {
    border: 0; /* 1 */
    padding: 0;
    white-space: normal; /* 2 */
    *margin-left: -7px; /* 3 */
}

/**
 * 1. Correct font size not being inherited in all browsers.
 * 2. Address margins set differently in IE 6/7, Firefox 3+, Safari 5,
 *    and Chrome.
 * 3. Improve appearance and consistency in all browsers.
 */

button,
input,
select,
textarea {
    font-size: 100%; /* 1 */
    margin: 0; /* 2 */
    vertical-align: baseline; /* 3 */
    *vertical-align: middle; /* 3 */
}

/**
 * Address Firefox 3+ setting `line-height` on `input` using `!important` in
 * the UA stylesheet.
 */

button,
input {
    line-height: normal;
}

/**
 * Address inconsistent `text-transform` inheritance for `button` and `select`.
 * All other form control elements do not inherit `text-transform` values.
 * Correct `button` style inheritance in Chrome, Safari 5+, and IE 6+.
 * Correct `select` style inheritance in Firefox 4+ and Opera.
 */

button,
select {
    text-transform: none;
}

/**
 * 1. Avoid the WebKit bug in Android 4.0.* where (2) destroys native `audio`
 *    and `video` controls.
 * 2. Correct inability to style clickable `input` types in iOS.
 * 3. Improve usability and consistency of cursor style between image-type
 *    `input` and others.
 * 4. Remove inner spacing in IE 7 without affecting normal text inputs.
 *    Known issue: inner spacing remains in IE 6.
 */

button,
html input[type="button"], /* 1 */
input[type="reset"],
input[type="submit"] {
    -webkit-appearance: button; /* 2 */
    cursor: pointer; /* 3 */
    *overflow: visible;  /* 4 */
}

/**
 * Re-set default cursor for disabled elements.
 */

button[disabled],
html input[disabled] {
    cursor: default;
}

/**
 * 1. Address box sizing set to content-box in IE 8/9.
 * 2. Remove excess padding in IE 8/9.
 * 3. Remove excess padding in IE 7.
 *    Known issue: excess padding remains in IE 6.
 */

input[type="checkbox"],
input[type="radio"] {
    box-sizing: border-box; /* 1 */
    padding: 0; /* 2 */
    *height: 13px; /* 3 */
    *width: 13px; /* 3 */
}

/**
 * 1. Address `appearance` set to `searchfield` in Safari 5 and Chrome.
 * 2. Address `box-sizing` set to `border-box` in Safari 5 and Chrome
 *    (include `-moz` to future-proof).
 */

input[type="search"] {
    -webkit-appearance: textfield; /* 1 */
    -moz-box-sizing: content-box;
    -webkit-box-sizing: content-box; /* 2 */
    box-sizing: content-box;
}

/**
 * Remove inner padding and search cancel button in Safari 5 and Chrome
 * on OS X.
 */

input[type="search"]::-webkit-search-cancel-button,
input[type="search"]::-webkit-search-decoration {
    -webkit-appearance: none;
}

/**
 * Remove inner padding and border in Firefox 3+.
 */

button::-moz-focus-inner,
input::-moz-focus-inner {
    border: 0;
    padding: 0;
}

/**
 * 1. Remove default vertical scrollbar in IE 6/7/8/9.
 * 2. Improve readability and alignment in all browsers.
 */

textarea {
    overflow: auto; /* 1 */
    vertical-align: top; /* 2 */
}

/* ==========================================================================
   Tables
   ========================================================================== */

/**
 * Remove most spacing between table cells.
 */

table {
    border-collapse: collapse;
    border-spacing: 0;
}

  </style>

  <style type="text/css">
  
  html, body {
    margin: 0;
    padding: 0;
    min-height: 100%;
  }
  body {
    background: #fff;
    font-family: 'Roboto', "Inconsolata", "Helvetica Neueue", Helvetica, sans;
    font-weight: 300;
    font-size: 14px;
    line-height: 1.6em;
  }
  #content {
    width: 70%;
    max-width: 850px;
    float: left;
    padding: 30px 60px;
    border-left: 1px solid #ddd;
  }
  #sidebar {
    width: 25%;
    float: left;
    padding: 30px;
    overflow: hidden;
  }
  #nav {
    font-size: 130%;
    margin: 0 0 15px 0;
  }

  #top {
    display: block;
    position: fixed;
    bottom: 5px;
    left: 5px;
    font-size: .85em;
    text-transform: uppercase;
  }

  #footer {
    font-size: .75em;
    padding: 5px 30px;
    border-top: 1px solid #ddd;
    text-align: right;
  }
    #footer p {
      margin: 0 0 0 30px;
      display: inline-block;
    }

  h1, h2, h3, h4, h5 {
    font-weight: 300;
  }
  h1 {
    font-size: 2.5em;
    line-height: 1.1em;
    margin: 0 0 .50em 0;
  }

  h2 {
    font-size: 1.75em;
    margin: 1em 0 .50em 0;
  }

  h3 {
    margin: 25px 0 10px 0;
  }

  h4 {
    margin: 0;
    font-size: 105%;
  }

  a {
    color: #058;
    text-decoration: none;
    transition: color .3s ease-in-out;
  }

  a:hover {
    color: #e08524;
    transition: color .3s ease-in-out;
  }

  pre, code, .mono, .name {
    font-family: 'Inconsolata', "Ubuntu Mono", "Cousine", "DejaVu Sans Mono", monospace;
  }

  .title .name {
    font-weight: bold;
  }
  .section-title {
    margin-top: 2em;
  }
  .ident {
    color: #900;
  }

  code {
    background: #f9f9f9;
  } 

  pre {
    background: #fefefe;
    /*border: 1px solid #ddd;*/
    box-shadow: 2px 2px 0 #f3f3f3;
    margin: 0 30px;
    /*padding: 15px 30px;*/
  }

  .codehilite {
    margin: 0 30px 10px 30px;
  }

    .codehilite pre {
      margin: 0;
    }
    .codehilite .err { background: #ff3300; color: #fff !important; } 

  table#module-list {
    font-size: 110%;
  }

    table#module-list tr td:first-child {
      padding-right: 10px;
      white-space: nowrap;
    }

    table#module-list td {
      vertical-align: top;
      padding-bottom: 8px;
    }

      table#module-list td p {
        margin: 0 0 7px 0;
      }

  .def {
    display: table;
  }

    .def p {
      display: table-cell;
      vertical-align: top;
      text-align: left;
    }

    .def p:first-child {
      white-space: nowrap;
    }

    .def p:last-child {
      width: 100%;
    }


  #index {
    list-style-type: none;
    margin: 0;
    padding: 0;
  }
    ul#index .class_name {
      /* font-size: 110%; */
      font-weight: bold;
    }
    #index ul {
      margin: 0;
    }

  .item {
    margin: 0 0 15px 0;
  }

    .item .class {
      margin: 0 0 25px 30px;
    }

      .item .class ul.class_list {
        margin: 0 0 20px 0;
      }

    .item .name {
      background: #fafafa;
      margin: 0;
      font-weight: bold;
      padding: 5px 10px;
      border-radius: 3px;
      display: inline-block;
      min-width: 40%;
    }
      .item .name:hover {
        background: #f6f6f6;
      }

    .item .empty_desc {
      margin: 0 0 5px 0;
      padding: 0;
    }

    .item .inheritance {
      margin: 3px 0 0 30px;
    }

    .item .inherited {
      color: #666;
    }

    .item .desc {
      padding: 0 8px;
      margin: 0;
    }

      .item .desc p {
        margin: 0 0 10px 0;
      }

    .source_cont {
      margin: 0;
      padding: 0;
    }

    .source_link a {
      background: #ffc300;
      font-weight: 400;
      font-size: .75em;
      text-transform: uppercase;
      color: #fff;
      text-shadow: 1px 1px 0 #f4b700;
      
      padding: 3px 8px;
      border-radius: 2px;
      transition: background .3s ease-in-out;
    }
      .source_link a:hover {
        background: #FF7200;
        text-shadow: none;
        transition: background .3s ease-in-out;
      }

    .source {
      display: none;
      /*max-height: 600px;
      overflow-y: scroll;*/
      margin-bottom: 15px;
    }

      .source .codehilite {
        margin: 0;
      }

  .desc h1, .desc h2, .desc h3 {
    font-size: 100% !important;
  }
  .clear {
    clear: both;
  }

  @media all and (max-width: 950px) {
    #sidebar {
      width: 35%;
    }
    #content {
      width: 65%;
    }
  }
  @media all and (max-width: 650px) {
    #top {
      display: none;
    }
    #sidebar {
      float: none;
      width: auto;
    }
    #content {
      float: none;
      width: auto;
      padding: 30px;
    }

    #index ul {
      padding: 0;
      margin-bottom: 15px;
    }
    #index ul li {
      display: inline-block;
      margin-right: 30px;
    }
    #footer {
      text-align: left;
    }
    #footer p {
      display: block;
      margin: inherit;
    }
  }

  /*****************************/

  </style>


  <style type="text/css">
  
/* ==========================================================================
   EXAMPLE Media Queries for Responsive Design.
   These examples override the primary ('mobile first') styles.
   Modify as content requires.
   ========================================================================== */

@media only screen and (min-width: 35em) {
    /* Style adjustments for viewports that meet the condition */
}

@media print,
       (-o-min-device-pixel-ratio: 5/4),
       (-webkit-min-device-pixel-ratio: 1.25),
       (min-resolution: 120dpi) {
    /* Style adjustments for high resolution devices */
}

/* ==========================================================================
   Print styles.
   Inlined to avoid required HTTP connection: h5bp.com/r
   ========================================================================== */

@media print {
    * {
        background: transparent !important;
        color: #000 !important; /* Black prints faster: h5bp.com/s */
        box-shadow: none !important;
        text-shadow: none !important;
    }

    a,
    a:visited {
        text-decoration: underline;
    }

    a[href]:after {
        content: " (" attr(href) ")";
    }

    abbr[title]:after {
        content: " (" attr(title) ")";
    }

    /*
     * Don't show links for images, or javascript/internal links
     */

    .ir a:after,
    a[href^="javascript:"]:after,
    a[href^="#"]:after {
        content: "";
    }

    pre,
    blockquote {
        border: 1px solid #999;
        page-break-inside: avoid;
    }

    thead {
        display: table-header-group; /* h5bp.com/t */
    }

    tr,
    img {
        page-break-inside: avoid;
    }

    img {
        max-width: 100% !important;
    }

    @page {
        margin: 0.5cm;
    }

    p,
    h2,
    h3 {
        orphans: 3;
        widows: 3;
    }

    h2,
    h3 {
        page-break-after: avoid;
    }
}

  </style>

  <script type="text/javascript">
  function toggle(id, $link) {
    $node = document.getElementById(id);
    if (!$node)
    return;
    if (!$node.style.display || $node.style.display == 'none') {
    $node.style.display = 'block';
    $link.innerHTML = 'Hide source &nequiv;';
    } else {
    $node.style.display = 'none';
    $link.innerHTML = 'Show source &equiv;';
    }
  }
  </script>
<!--<link rel="stylesheet" href="css/hljs-styles/monokai.css">-->
<link rel="stylesheet" href="css/hljs-styles/solarized-light.css">
<script src="js//highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
</head>
<body>
<a href="#" id="top">Top</a>

<div id="container">
    
  
  <div id="sidebar">
    <h1>Index</h1>
    <ul id="index">
    <li class="set"><h3><a href="#header-variables">Module globals</a></h3>
      
  <ul>
    <li class="mono"><a href="#birdears.CHROMATIC_TYPE">CHROMATIC_TYPE</a></li>
    <li class="mono"><a href="#birdears.DEBUG">DEBUG</a></li>
    <li class="mono"><a href="#birdears.DIATONIC_MODES">DIATONIC_MODES</a></li>
    <li class="mono"><a href="#birdears.INTERVALS">INTERVALS</a></li>
    <li class="mono"><a href="#birdears.KEYBOARD_INDICES">KEYBOARD_INDICES</a></li>
    <li class="mono"><a href="#birdears.KEYS">KEYS</a></li>
    <li class="mono"><a href="#birdears.MAX_SEMITONES_RESOLVE_BELOW">MAX_SEMITONES_RESOLVE_BELOW</a></li>
    <li class="mono"><a href="#birdears.notes2">notes2</a></li>
    <li class="mono"><a href="#birdears.notes3">notes3</a></li>
  </ul>

    </li>

    <li class="set"><h3><a href="#header-functions">Functions</a></h3>
      
  <ul>
    <li class="mono"><a href="#birdears.main">main</a></li>
    <li class="mono"><a href="#birdears.print_stuff">print_stuff</a></li>
  </ul>

    </li>

    <li class="set"><h3><a href="#header-classes">Classes</a></h3>
      <ul>
        <li class="mono">
        <span class="class_name"><a href="#birdears.Cadence">Cadence</a></span>
        
          
  <ul>
    <li class="mono"><a href="#birdears.Cadence.__init__">__init__</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#birdears.HarmonicIntervalQuestion">HarmonicIntervalQuestion</a></span>
        
          
  <ul>
    <li class="mono"><a href="#birdears.HarmonicIntervalQuestion.__init__">__init__</a></li>
    <li class="mono"><a href="#birdears.HarmonicIntervalQuestion.check_question">check_question</a></li>
    <li class="mono"><a href="#birdears.HarmonicIntervalQuestion.make_resolution">make_resolution</a></li>
    <li class="mono"><a href="#birdears.HarmonicIntervalQuestion.play_question">play_question</a></li>
    <li class="mono"><a href="#birdears.HarmonicIntervalQuestion.play_resolution">play_resolution</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#birdears.Interval">Interval</a></span>
        
          
  <ul>
    <li class="mono"><a href="#birdears.Interval.__init__">__init__</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#birdears.MelodicIntervalQuestion">MelodicIntervalQuestion</a></span>
        
          
  <ul>
    <li class="mono"><a href="#birdears.MelodicIntervalQuestion.__init__">__init__</a></li>
    <li class="mono"><a href="#birdears.MelodicIntervalQuestion.check_question">check_question</a></li>
    <li class="mono"><a href="#birdears.MelodicIntervalQuestion.make_resolution">make_resolution</a></li>
    <li class="mono"><a href="#birdears.MelodicIntervalQuestion.play_question">play_question</a></li>
    <li class="mono"><a href="#birdears.MelodicIntervalQuestion.play_resolution">play_resolution</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#birdears.QuestionBase">QuestionBase</a></span>
        
          
  <ul>
    <li class="mono"><a href="#birdears.QuestionBase.__init__">__init__</a></li>
    <li class="mono"><a href="#birdears.QuestionBase.check_question">check_question</a></li>
    <li class="mono"><a href="#birdears.QuestionBase.make_resolution">make_resolution</a></li>
    <li class="mono"><a href="#birdears.QuestionBase.play_question">play_question</a></li>
    <li class="mono"><a href="#birdears.QuestionBase.play_resolution">play_resolution</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#birdears.Scale">Scale</a></span>
        
          
  <ul>
    <li class="mono"><a href="#birdears.Scale.__init__">__init__</a></li>
    <li class="mono"><a href="#birdears.Scale.get_chromatic">get_chromatic</a></li>
    <li class="mono"><a href="#birdears.Scale.get_diatonic">get_diatonic</a></li>
  </ul>

        </li>
      </ul>
    </li>

    </ul>
  </div>

    <article id="content">
      
  

  


  <header id="section-intro">
  <h1 class="title"><span class="name">birdears</span> module</h1>
  
  
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-birdears', this);">Show source &equiv;</a></p>
  <div id="source-birdears" class="source">
    <pre><code>#!/usr/bin/env python3

import subprocess
import time
from random import randrange, choice
from collections import deque
from math import floor

DEBUG = True

# FIXME
notes2 = ('C', 'C#', 'D', 'D#', 'E', 'F', 'F#', 'G', 'G#', 'A', 'A#', 'B')
notes3 = ('C', 'Db', 'D', 'Eb', 'E', 'F', 'Gb', 'G', 'Ab', 'A', 'Bb', 'B')

KEYS = ('C', 'C#', 'Db', 'D', 'D#', 'Eb', 'E', 'F', 'F#', 'Gb', 'G', 'G#',
        'Ab', 'A', 'A#', 'Bb', 'B')

INTERVALS = (
    (0, 'P1', 'Perfect Unison'),
    (1, 'm2', 'Minor Second'),
    (2, 'M2', 'Major Second'),
    (3, 'm3', 'Minor Third'),
    (4, 'M3', 'Major Third'),
    (5, 'P4', 'Perfect Fourth'),
    (6, 'A4', 'Augmented Fourth'),
    (7, 'P5', 'Perfect Fifth'),
    (8, 'm6', 'Minor Sixth'),
    (9, 'M6', 'Major Sixth'),
    (10, 'm7', 'Minor Seventh'),
    (11, 'M7', 'Major Seventh'),
    (12, 'P8', 'Perfect Octave'),
    (13, 'A8', 'Minor Ninth'),
    (14, 'M9', 'Major Ninth'),
    (15, 'm10', 'Minor Tenth'),
    (16, 'M10', 'Major Tenth'),
    (17, 'P11', 'Perfect Eleventh'),
    (18, 'A11', 'Augmented Eleventh'),
    (19, 'P12', 'Perfect Twelfth'),
    (20, 'm13', 'Minor Thirteenth'),
    (21, 'M13', 'Major Thirteenth'),
    (22, 'm14', 'Minor Fourteenth'),
    (23, 'M14', 'Major Fourteenth'),
    (24, 'P15', 'Perfect Double-octave'),
    (25, 'A15', 'Minor Sixteenth'),
    (26, 'M16', 'Major Sixteenth'),
    (27, 'm17', 'Minor Seventeenth'),
    (28, 'M17', 'Major Seventeenth'),
    (29, 'P18', 'Perfect Eighteenth'),
    (30, 'A18', 'Augmented Eighteenth'),
    (31, 'P19', 'Perfect Nineteenth'),
    (32, 'm20', 'Minor Twentieth'),
    (33, 'M20', 'Major Twentieth'),
    (34, 'm21', 'Minor Twenty-first'),
    (35, 'M21', 'Major Twenty-first'),
    (36, 'P22', 'Perfect Triple-octave')
)

CHROMATIC_TYPE = (0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12)
DIATONIC_MODES = {
    'major': (0, 2, 4, 5, 7, 9, 11, 12),
    'minor': (0, 2, 3, 5, 7, 8, 10, 12),
}

# MAJOR keyboard keys (with chromatics)
# keyindex for major and chromatic major context
#  s d   g h j        IIb  IIIb       Vb VIb  VIIb
# z x c v b n m  <-  I   II   III  IV   V   VI   VII
#
#  -- SHIFT meaning an octave higher

# MINOR keyboard keys (with chromatics)
# keyindex for minor and chromatic minor context
#
#  s   f g   j k   eg.:      a#   c# d#    f# g#
# z x c v b n m    -------  a  b c  d  e  f  g

KEYBOARD_INDICES = {
    'diatonic': {
        'minor': 'z xc v bn m Z XC V BN M',
        'major': 'z x cv b n mZ X CV B NM'
    },
    'chromatic': {
        'minor': "zsxcfvgbnjmkZSXCFVGBNJMK",
        'major': "zsxdcvgbhnjmZSXDCVGBHNJM",
    }
}

# how many steps to resolve on tonic,
# after which resolves on tonic octave
# (begins on 0 as it is an index)
# 5 is tritone; then
# [0 1 2 3 4 5] resolves below (tonic)
# and [6 7 8 9 10 11] resolves above (octave)

MAX_SEMITONES_RESOLVE_BELOW = 5


class Scale:

    def __init__(self, tonic, mode=None, octave=None, n_octaves=None,
                 chromatic=None, descending=None, dont_repeat_tonic=None):

        if not chromatic:
            scale = self.get_diatonic(tonic=tonic, mode=mode, octave=octave,
                                      n_octaves=n_octaves,
                                      descending=descending,
                                      dont_repeat_tonic=dont_repeat_tonic)
        else:
            scale = self.get_chromatic(tonic=tonic, octave=octave,
                                       n_octaves=n_octaves,
                                       descending=descending,
                                       dont_repeat_tonic=dont_repeat_tonic)

        self.scale = scale
        self.chromatic = chromatic

    def get_chromatic(self, tonic, octave=None, n_octaves=None,
                      descending=None, dont_repeat_tonic=None):
        """Returns a chromatic scale from tonic.
        """

        global notes3, notes2

        tonic_index = self._get_chromatic_idx(tonic)

        if tonic == 'F' or 'b' in tonic:
            notes = deque(notes3)
        else:
            notes = deque(notes2)

        notes.rotate(-(tonic_index))

        if n_octaves:
            chromatic = notes * n_octaves
        else:
            chromatic = notes

        # FIXME: check if this works on descending
        if not dont_repeat_tonic:
            chromatic.append(chromatic[0])

        if descending:
            chromatic.reverse()

        if octave:
            chromatic = self._append_octave_to_scale(scale=chromatic,
                                                     starting_octave=octave,
                                                     descending=descending)

        return chromatic

    def get_diatonic(self, tonic, mode, octave=None, n_octaves=None,
                     descending=None, dont_repeat_tonic=None):
        """Returns a diatonic scale from tonic and mode.
        """

        global DIATONIC_MODES
        diatonic_mode = DIATONIC_MODES[mode]

        chromatic = self.get_chromatic(tonic)

        diatonic = [chromatic[semitones] for semitones in diatonic_mode[:-1]]

        if n_octaves:
            diatonic = diatonic * n_octaves

        # FIXME: check if this works on descending
        if not dont_repeat_tonic:
            diatonic.append(chromatic[diatonic_mode[-1]])

        if descending:
            diatonic.reverse()

        if octave:
            diatonic = self._append_octave_to_scale(scale=diatonic,
                                                    starting_octave=octave,
                                                    descending=descending)

        return diatonic

    def _append_octave_to_scale(self, scale, starting_octave, descending=None):
        """Inserts scientific octave number to the notes on a the given scale.
        """

        next_octave = 1 if not descending else -1

        scale_with_octave = []
        changing_note = None

        current_octave = starting_octave

        if not descending:
            for closest in ['C', 'C#', 'Db']:
                if closest in scale:
                    changing_note = closest
                    break
        else:
            for closest in ['B', 'Bb', 'A#']:
                if closest in scale:
                    changing_note = closest
                    break

        for idx, note in enumerate(scale):
            if idx > 0 and note == changing_note:
                current_octave += next_octave

            scale_with_octave.append("{}{}".format(note, current_octave))

        return scale_with_octave

    def _get_chromatic_idx(self, note):
        """Gets the chromatic index, ie., the distance in semitones of a given
        note from C.
        """

        global notes2, notes3

        use_flat = -1 if (note == 'F' or 'b' in note) else 0

        # FIXME
        if note in notes2:
            note_index = notes2.index(note)
        elif note in notes3:
            note_index = notes3.index(note)
        else:
            note_index = False

        return note_index


class Interval:

    def __init__(self, mode, tonic, octave, chromatic=None, n_octaves=None,
                 descending=None):
        """Chooses a chromatic interval for the question.
        """

        global DIATONIC_MODES, CHROMATIC_TYPE, MAX_SEMITONES_RESOLVE_BELOW
        global INTERVALS

        diatonic_mode = list(DIATONIC_MODES[mode])

        if descending:
            diatonic_mode = [12 - x for x in diatonic_mode]
            diatonic_mode.reverse()

        step_network = diatonic_mode
        chromatic_network = list(CHROMATIC_TYPE)

        # FIXME: please refactore this with method signature n_octaves=1:
        if n_octaves:
            for i in range(1, n_octaves):
                step_network.extend([semitones + 12 * i for semitones in
                                     diatonic_mode[1:]])
                chromatic_network.extend([semitones + 12 * i for semitones in
                                          CHROMATIC_TYPE[1:]])
        else:
            n_octaves = 1

        if not chromatic:
            semitones = choice(step_network)
        else:
            semitones = choice(chromatic_network)

        chromatic_scale = Scale(tonic=tonic, octave=None, chromatic=True,
                                n_octaves=n_octaves, descending=descending)

        chromatic_scale_pitch = Scale(tonic=tonic, octave=octave,
                                      chromatic=True, n_octaves=n_octaves,
                                      descending=descending)


        distance = dict({
            'octaves': 0 if (semitones < 12) else int(semitones / 12),
            'semitones': semitones if (semitones < 12) else int(semitones % 12)
        })
        # chromatic_offset = semitones if semitones < 12 else semitones % 12
        chromatic_offset = distance['semitones']

        note_name = "{}".format(chromatic_scale.scale[semitones])
        note_and_octave = "{}".format(chromatic_scale_pitch.scale[semitones])


        is_chromatic = True if chromatic_offset not in diatonic_mode else False

        if is_chromatic:
            # here we are rounding it to the next diatonic degree, to insert
            # it after:
            if chromatic_offset <= MAX_SEMITONES_RESOLVE_BELOW:
                diatonic_index = diatonic_mode.index(chromatic_offset - 1)
            else:
                diatonic_index = diatonic_mode.index(chromatic_offset + 1)
        else:
            diatonic_index = diatonic_mode.index(chromatic_offset)

        if not descending:
            interval_octave = int(octave) + distance['octaves']
        else:
            interval_octave = int(octave) - distance['octaves']

        self.interval_data = dict({
            'tonic_octave': octave,
            'interval_octave': interval_octave,
            'chromatic_offset': chromatic_offset,
            'note_and_octave': note_and_octave,
            'note_name': note_name,
            'semitones': semitones,
            'is_chromatic': is_chromatic,
            'is_descending': False if not descending else True,
            'diatonic_index': diatonic_index,
            'distance': distance,
            'data': INTERVALS[semitones],
        })


class Cadence:
    def __init__(self):
        pass


class QuestionBase:
    """
    Base Class to be subclassed for Question classes.

    This class implements attributes and routines to be used in Question
    subclasses.

    Attributes
    ----------
    notes : list
            list of notes and enharmonics to be used by the class

    """

    def __init__(self, mode='major', tonic=None, octave=None, descending=None,
                 chromatic=None, n_octaves=None, *args, **kwargs):

        global KEYBOARD_INDICES, KEYS

        self.question_duration = 2
        self.question_delay = 1.5
        self.question_pos_delay = 0

        self.resolution_duration = 2.5
        self.resolution_delay = 0.5
        self.resolution_pos_delay = 1

        self.mode = mode

        # self.octave = octave if octave else randrange(3, 5)
        self.octave = octave or randrange(3, 5)

        # FIXME: maybe this should go to __main__
        self.keyboard_index = KEYBOARD_INDICES['chromatic' if chromatic
                                               else 'diatonic'][self.mode]

        # FIXME
        # self.tonic = tonic if tonic else choice(KEYS)
        self.tonic = tonic or choice(KEYS)
        tonic = self.tonic

        diatonic_scale = Scale(tonic=tonic, mode=mode, octave=None,
                         descending=descending, n_octaves=n_octaves)
        chromatic_scale = Scale(tonic=tonic, octave=None, chromatic=True,
                          descending=descending, n_octaves=n_octaves)

        diatonic_scale_pitch = Scale(tonic=tonic, mode=mode, octave=self.octave,
                               descending=descending, n_octaves=n_octaves)
        chromatic_scale_pitch = Scale(tonic=tonic, octave=self.octave,
                                chromatic=True, descending=descending,
                                n_octaves=n_octaves)

        scales = dict({
            'diatonic': diatonic_scale,
            'chromatic': chromatic_scale,
            'diatonic_pitch': diatonic_scale_pitch,
            'chromatic_pitch': chromatic_scale_pitch,
        })
        self.scales = scales

        self.concrete_tonic = scales['diatonic_pitch'].scale[0]
        self.scale_size = len(scales['diatonic'].scale)

        self.interval = Interval(mode=mode, tonic=tonic, octave=self.octave,
                                 chromatic=chromatic, n_octaves=n_octaves,
                                 descending=descending).interval_data
        # FIXME
        self.resolution_pitch = \
            self.make_resolution(chromatic=chromatic, mode=self.mode,
                                 tonic=tonic, interval=self.interval,
                                 descending=descending)

    def _wait(self, seconds):
        time.sleep(seconds)

    def _play_note(self, note, duration, delay):
        # requires sox to be installed

        command = (
            "play -qn synth {duration} pluck {note}"
            " fade l 0 {duration} 2 reverb"
        ).format(note=note, duration=duration)

        subprocess.Popen(command.split())

        if delay:
            self._wait(delay)

    def _play_chord(self, chord, duration, delay):

        for note in chord:
            self._play_note(note, duration=duration, delay=0)

        if delay:
            self._wait(delay)

    def play_question(self):

        tonic = self.concrete_tonic
        interval = self.interval['note_and_octave']

        play_note = self._play_note

        play_note(note=tonic, duration=self.question_duration,
                  delay=self.question_delay)
        play_note(note=interval, duration=self.question_duration, delay=0)

        if self.question_pos_delay:
            self._wait(self.resolution_pos_delay)

    def play_resolution(self):

        play_note = self._play_note

        for tone in self.resolution_pitch:
            play_note(note=tone, duration=self.resolution_duration,
                      delay=self.resolution_delay)

        if self.resolution_pos_delay:
            self._wait(self.resolution_pos_delay)

    def check_question(self, user_input_char):
        """Checks whether the given answer is correct."""

        global INTERVALS

        semitones = self.keyboard_index.index(user_input_char)

        user_interval = INTERVALS[semitones][2]
        correct_interval = INTERVALS[self.interval['semitones']][2]

        response = {
            'is_correct': False,
            'user_interval': user_interval,
            'correct_interval': correct_interval,
        }

        if semitones == self.interval['semitones']:
            response.update({'is_correct': True})

        else:
            response.update({'is_correct': False})

        return response

    def make_resolution(self, chromatic, mode, tonic, interval,
                        descending=None):

        global DIATONIC_MODES, MAX_SEMITONES_RESOLVE_BELOW

        resolution_pitch = []

        #diatonic_mode = DIATONIC_MODES[mode]

        scale_pitch = Scale(tonic=tonic, mode=mode,
                            octave=interval['interval_octave'],
                            #octave=interval['tonic_octave'],
                            descending=descending)
        self.res_scale = scale_pitch

        print(scale_pitch.scale)
        print(interval)

        if not chromatic:

            if interval['chromatic_offset'] <= MAX_SEMITONES_RESOLVE_BELOW:
                resolution_pitch = \
                    scale_pitch.scale[:interval['diatonic_index'] + 1]
                resolution_pitch.reverse()
            else:
                resolution_pitch = \
                    scale_pitch.scale[interval['diatonic_index']:]

        else:

            if interval['chromatic_offset'] <= MAX_SEMITONES_RESOLVE_BELOW:
                if interval['is_chromatic']:
                    resolution_pitch.extend(
                        scale_pitch.scale[: interval['diatonic_index'] + 1])
                    resolution_pitch.append(interval['note_and_octave'])
                else:
                    resolution_pitch.extend(
                        scale_pitch.scale[: interval['diatonic_index'] + 1])
                resolution_pitch.reverse()

            else:
                if interval['is_chromatic']:
                    resolution_pitch.append(interval['note_and_octave'])

                resolution_pitch.extend(
                    scale_pitch.scale[interval['diatonic_index']:])

        # unisson and octave
        # if interval['semitones'] == 0:
        if interval['semitones'] == 0:
            resolution_pitch.append(scale_pitch.scale[0])
        elif interval['semitones'] % 12 == 0:
            # FIXME: multipe octaves
            #resolution_pitch.append(scale_pitch.scale[-1])
            #resolution_pitch.append(scale_pitch.scale[0])
            resolution_pitch.append("{}{}".format(tonic, interval['tonic_octave']))

        return resolution_pitch


class MelodicIntervalQuestion(QuestionBase):

    def __init__(self, mode='major', tonic=None, octave=None, descending=None,
                 chromatic=None, n_octaves=None, *args, **kwargs):

        super(MelodicIntervalQuestion, self).\
                __init__(mode=mode, tonic=tonic, octave=octave,
                         descending=descending, chromatic=chromatic,
                         n_octaves=n_octaves, *args, **kwargs)


class HarmonicIntervalQuestion(QuestionBase):

    def __init__(self, mode='major', tonic=None, octave=None, descending=None,
                 chromatic=None, n_octaves=None, *args, **kwargs):

        super(HarmonicIntervalQuestion, self).\
                __init__(mode=mode, tonic=tonic, octave=octave,
                         descending=descending, chromatic=chromatic,
                         n_octaves=n_octaves, *args, **kwargs)


    def play_question(self):

        tonic = self.concrete_tonic
        interval = self.interval['note_and_octave']

        question_chords = [(tonic, tonic), (tonic, interval)]

        for item in question_chords:
            self._play_chord(chord=item, duration=self.question_duration,
                             delay=self.question_delay)

        if self.question_pos_delay:
            self._wait(self.resolution_pos_delay)

    def play_resolution(self):

        tonic = self.concrete_tonic

        for tone in self.resolution_pitch:
            self._play_chord(chord=[tonic, tone],
                             duration=self.resolution_duration,
                             delay=self.resolution_delay)

        if self.resolution_pos_delay:
            self._wait(self.resolution_pos_delay)


# http://code.activestate.com/recipes/134892/
class _Getch:
    """Gets a single character from standard input.  Does not echo to the
screen."""

    def __init__(self):
        try:
            self.impl = _GetchWindows()
        except ImportError:
            self.impl = _GetchUnix()

    def __call__(self): return self.impl()


class _GetchUnix:
    def __init__(self):
        import tty
        import sys

    def __call__(self):
        import sys
        import tty
        import termios
        fd = sys.stdin.fileno()
        old_settings = termios.tcgetattr(fd)
        try:
            tty.setraw(sys.stdin.fileno())
            ch = sys.stdin.read(1)
        finally:
            termios.tcsetattr(fd, termios.TCSADRAIN, old_settings)
        return ch


class _GetchWindows:
    def __init__(self):
        import msvcrt

    def __call__(self):
        import msvcrt
        return msvcrt.getch()

# this is for debugging


def print_stuff(question):
    padd = "─" * 30  # vim: insert mode, ^vu2500
    print("""
{}

Tonic: {} | Note(Int): {} |  Interval: {} | Semitones(Int): {} |
Is Note Chromatic: {} |
Scale: {}, Octave: {}
Resolution: {},
Chromatic: {}
Concrete Scale: {} | Chroma Concrete: {}
{}
""".format(
        padd,
        question.concrete_tonic,
        question.interval['note_and_octave'],
        "─".join(INTERVALS[question.interval['semitones']][1:]),
        question.interval['semitones'],
        question.interval['is_chromatic'],
        "─".join(question.scales['diatonic'].scale),
        "{}-{}".format(question.octave, question.octave + 1),
        "─".join(question.resolution_pitch),
        "─".join(question.scales['chromatic'].scale),
        "─".join(question.scales['diatonic_pitch'].scale),
        "─".join(question.scales['chromatic_pitch'].scale),
        padd,
    ))


def main():
    getch = _Getch()

    new_question_bit = True

    while True:
        if new_question_bit is True:

            new_question_bit = False

            question = MelodicIntervalQuestion(mode='major',descendent=True)
            #question = HarmonicIntervalQuestion(mode='major')
            #question = HarmonicIntervalQuestion(mode='major')

            # debug
            if DEBUG:
                print_stuff(question)

            question.play_question()

        user_input = getch()

        # any response input interval from valid keys
        if user_input in question.keyboard_index and user_input != ' ':  # spc

            response = question.check_question(user_input)

            if response['is_correct']:
                print("Correct!.. it is “{}”".format(
                    response['user_interval']))
            else:
                print("Incorrect.. the correct is “{}” ! You aswered “{}”..".
                      format(response['correct_interval'],
                             response['user_interval']))

            question.play_resolution()

            new_question_bit = True

        # q - quit
        elif user_input == 'q':
            exit(0)

        # r - repeat interval
        elif user_input == 'r':
            question.play_question()

if __name__ == "__main__":
    main()
</code></pre>
  </div>

  </header>

  <section id="section-items">
    <h2 class="section-title" id="header-variables">Module globals</h2>
      <div class="item">
      <p id="birdears.CHROMATIC_TYPE" class="name">global <span class="ident">CHROMATIC_TYPE</span></p>
      
  
  <div class="source_cont">
</div>

      </div>
      <div class="item">
      <p id="birdears.DEBUG" class="name">global <span class="ident">DEBUG</span></p>
      
  
  <div class="source_cont">
</div>

      </div>
      <div class="item">
      <p id="birdears.DIATONIC_MODES" class="name">global <span class="ident">DIATONIC_MODES</span></p>
      
  
  <div class="source_cont">
</div>

      </div>
      <div class="item">
      <p id="birdears.INTERVALS" class="name">global <span class="ident">INTERVALS</span></p>
      
  
  <div class="source_cont">
</div>

      </div>
      <div class="item">
      <p id="birdears.KEYBOARD_INDICES" class="name">global <span class="ident">KEYBOARD_INDICES</span></p>
      
  
  <div class="source_cont">
</div>

      </div>
      <div class="item">
      <p id="birdears.KEYS" class="name">global <span class="ident">KEYS</span></p>
      
  
  <div class="source_cont">
</div>

      </div>
      <div class="item">
      <p id="birdears.MAX_SEMITONES_RESOLVE_BELOW" class="name">global <span class="ident">MAX_SEMITONES_RESOLVE_BELOW</span></p>
      
  
  <div class="source_cont">
</div>

      </div>
      <div class="item">
      <p id="birdears.notes2" class="name">global <span class="ident">notes2</span></p>
      
  
  <div class="source_cont">
</div>

      </div>
      <div class="item">
      <p id="birdears.notes3" class="name">global <span class="ident">notes3</span></p>
      
  
  <div class="source_cont">
</div>

      </div>

    <h2 class="section-title" id="header-functions">Functions</h2>
      
  <div class="item">
    <div class="name def" id="birdears.main">
    <p>def <span class="ident">main</span>(</p><p>)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-birdears.main', this);">Show source &equiv;</a></p>
  <div id="source-birdears.main" class="source">
    <pre><code>def main():
    getch = _Getch()

    new_question_bit = True

    while True:
        if new_question_bit is True:

            new_question_bit = False

            question = MelodicIntervalQuestion(mode='major',descendent=True)
            #question = HarmonicIntervalQuestion(mode='major')
            #question = HarmonicIntervalQuestion(mode='major')

            # debug
            if DEBUG:
                print_stuff(question)

            question.play_question()

        user_input = getch()

        # any response input interval from valid keys
        if user_input in question.keyboard_index and user_input != ' ':  # spc

            response = question.check_question(user_input)

            if response['is_correct']:
                print("Correct!.. it is “{}”".format(
                    response['user_interval']))
            else:
                print("Incorrect.. the correct is “{}” ! You aswered “{}”..".
                      format(response['correct_interval'],
                             response['user_interval']))

            question.play_resolution()

            new_question_bit = True

        # q - quit
        elif user_input == 'q':
            exit(0)

        # r - repeat interval
        elif user_input == 'r':
            question.play_question()
</code></pre>
  </div>
</div>

  </div>
  
      
  <div class="item">
    <div class="name def" id="birdears.print_stuff">
    <p>def <span class="ident">print_stuff</span>(</p><p>question)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-birdears.print_stuff', this);">Show source &equiv;</a></p>
  <div id="source-birdears.print_stuff" class="source">
    <pre><code>def print_stuff(question):
    padd = "─" * 30  # vim: insert mode, ^vu2500
    print("""
{}

Tonic: {} | Note(Int): {} |  Interval: {} | Semitones(Int): {} |
Is Note Chromatic: {} |
Scale: {}, Octave: {}
Resolution: {},
Chromatic: {}
Concrete Scale: {} | Chroma Concrete: {}
{}
""".format(
        padd,
        question.concrete_tonic,
        question.interval['note_and_octave'],
        "─".join(INTERVALS[question.interval['semitones']][1:]),
        question.interval['semitones'],
        question.interval['is_chromatic'],
        "─".join(question.scales['diatonic'].scale),
        "{}-{}".format(question.octave, question.octave + 1),
        "─".join(question.resolution_pitch),
        "─".join(question.scales['chromatic'].scale),
        "─".join(question.scales['diatonic_pitch'].scale),
        "─".join(question.scales['chromatic_pitch'].scale),
        padd,
    ))
</code></pre>
  </div>
</div>

  </div>
  

    <h2 class="section-title" id="header-classes">Classes</h2>
      
      <div class="item">
      <p id="birdears.Cadence" class="name">class <span class="ident">Cadence</span></p>
      
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-birdears.Cadence', this);">Show source &equiv;</a></p>
  <div id="source-birdears.Cadence" class="source">
    <pre><code>class Cadence:
    def __init__(self):
        pass
</code></pre>
  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#birdears.Cadence">Cadence</a></li>
          <li>builtins.object</li>
          </ul>
          <h3>Methods</h3>
            
  <div class="item">
    <div class="name def" id="birdears.Cadence.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Initialize self.  See help(type(self)) for accurate signature.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-birdears.Cadence.__init__', this);">Show source &equiv;</a></p>
  <div id="source-birdears.Cadence.__init__" class="source">
    <pre><code>def __init__(self):
    pass
</code></pre>
  </div>
</div>

  </div>
  
      </div>
      </div>
      
      <div class="item">
      <p id="birdears.HarmonicIntervalQuestion" class="name">class <span class="ident">HarmonicIntervalQuestion</span></p>
      
  
    <div class="desc"><p>Base Class to be subclassed for Question classes.</p>
<p>This class implements attributes and routines to be used in Question
subclasses.</p>
<h2>Attributes</h2>
<p>notes : list
        list of notes and enharmonics to be used by the class</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-birdears.HarmonicIntervalQuestion', this);">Show source &equiv;</a></p>
  <div id="source-birdears.HarmonicIntervalQuestion" class="source">
    <pre><code>class HarmonicIntervalQuestion(QuestionBase):

    def __init__(self, mode='major', tonic=None, octave=None, descending=None,
                 chromatic=None, n_octaves=None, *args, **kwargs):

        super(HarmonicIntervalQuestion, self).\
                __init__(mode=mode, tonic=tonic, octave=octave,
                         descending=descending, chromatic=chromatic,
                         n_octaves=n_octaves, *args, **kwargs)


    def play_question(self):

        tonic = self.concrete_tonic
        interval = self.interval['note_and_octave']

        question_chords = [(tonic, tonic), (tonic, interval)]

        for item in question_chords:
            self._play_chord(chord=item, duration=self.question_duration,
                             delay=self.question_delay)

        if self.question_pos_delay:
            self._wait(self.resolution_pos_delay)

    def play_resolution(self):

        tonic = self.concrete_tonic

        for tone in self.resolution_pitch:
            self._play_chord(chord=[tonic, tone],
                             duration=self.resolution_duration,
                             delay=self.resolution_delay)

        if self.resolution_pos_delay:
            self._wait(self.resolution_pos_delay)
</code></pre>
  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#birdears.HarmonicIntervalQuestion">HarmonicIntervalQuestion</a></li>
          <li><a href="#birdears.QuestionBase">QuestionBase</a></li>
          <li>builtins.object</li>
          </ul>
          <h3>Methods</h3>
            
  <div class="item">
    <div class="name def" id="birdears.HarmonicIntervalQuestion.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, mode=&#39;major&#39;, tonic=None, octave=None, descending=None, chromatic=None, n_octaves=None, *args, **kwargs)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#birdears.QuestionBase">QuestionBase</a></code>.<code><a href="#birdears.QuestionBase.__init__">__init__</a></code>
    </p>

    
  
    <div class="desc inherited"><p>Initialize self.  See help(type(self)) for accurate signature.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-birdears.HarmonicIntervalQuestion.__init__', this);">Show source &equiv;</a></p>
  <div id="source-birdears.HarmonicIntervalQuestion.__init__" class="source">
    <pre><code>def __init__(self, mode='major', tonic=None, octave=None, descending=None,
             chromatic=None, n_octaves=None, *args, **kwargs):
    super(HarmonicIntervalQuestion, self).\
            __init__(mode=mode, tonic=tonic, octave=octave,
                     descending=descending, chromatic=chromatic,
                     n_octaves=n_octaves, *args, **kwargs)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="birdears.HarmonicIntervalQuestion.check_question">
    <p>def <span class="ident">check_question</span>(</p><p>self, user_input_char)</p>
    </div>
    

    
  
    <div class="desc"><p>Checks whether the given answer is correct.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-birdears.HarmonicIntervalQuestion.check_question', this);">Show source &equiv;</a></p>
  <div id="source-birdears.HarmonicIntervalQuestion.check_question" class="source">
    <pre><code>def check_question(self, user_input_char):
    """Checks whether the given answer is correct."""
    global INTERVALS
    semitones = self.keyboard_index.index(user_input_char)
    user_interval = INTERVALS[semitones][2]
    correct_interval = INTERVALS[self.interval['semitones']][2]
    response = {
        'is_correct': False,
        'user_interval': user_interval,
        'correct_interval': correct_interval,
    }
    if semitones == self.interval['semitones']:
        response.update({'is_correct': True})
    else:
        response.update({'is_correct': False})
    return response
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="birdears.HarmonicIntervalQuestion.make_resolution">
    <p>def <span class="ident">make_resolution</span>(</p><p>self, chromatic, mode, tonic, interval, descending=None)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-birdears.HarmonicIntervalQuestion.make_resolution', this);">Show source &equiv;</a></p>
  <div id="source-birdears.HarmonicIntervalQuestion.make_resolution" class="source">
    <pre><code>def make_resolution(self, chromatic, mode, tonic, interval,
                    descending=None):
    global DIATONIC_MODES, MAX_SEMITONES_RESOLVE_BELOW
    resolution_pitch = []
    #diatonic_mode = DIATONIC_MODES[mode]
    scale_pitch = Scale(tonic=tonic, mode=mode,
                        octave=interval['interval_octave'],
                        #octave=interval['tonic_octave'],
                        descending=descending)
    self.res_scale = scale_pitch
    print(scale_pitch.scale)
    print(interval)
    if not chromatic:
        if interval['chromatic_offset'] <= MAX_SEMITONES_RESOLVE_BELOW:
            resolution_pitch = \
                scale_pitch.scale[:interval['diatonic_index'] + 1]
            resolution_pitch.reverse()
        else:
            resolution_pitch = \
                scale_pitch.scale[interval['diatonic_index']:]
    else:
        if interval['chromatic_offset'] <= MAX_SEMITONES_RESOLVE_BELOW:
            if interval['is_chromatic']:
                resolution_pitch.extend(
                    scale_pitch.scale[: interval['diatonic_index'] + 1])
                resolution_pitch.append(interval['note_and_octave'])
            else:
                resolution_pitch.extend(
                    scale_pitch.scale[: interval['diatonic_index'] + 1])
            resolution_pitch.reverse()
        else:
            if interval['is_chromatic']:
                resolution_pitch.append(interval['note_and_octave'])
            resolution_pitch.extend(
                scale_pitch.scale[interval['diatonic_index']:])
    # unisson and octave
    # if interval['semitones'] == 0:
    if interval['semitones'] == 0:
        resolution_pitch.append(scale_pitch.scale[0])
    elif interval['semitones'] % 12 == 0:
        # FIXME: multipe octaves
        #resolution_pitch.append(scale_pitch.scale[-1])
        #resolution_pitch.append(scale_pitch.scale[0])
        resolution_pitch.append("{}{}".format(tonic, interval['tonic_octave']))
    return resolution_pitch
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="birdears.HarmonicIntervalQuestion.play_question">
    <p>def <span class="ident">play_question</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-birdears.HarmonicIntervalQuestion.play_question', this);">Show source &equiv;</a></p>
  <div id="source-birdears.HarmonicIntervalQuestion.play_question" class="source">
    <pre><code>def play_question(self):
    tonic = self.concrete_tonic
    interval = self.interval['note_and_octave']
    question_chords = [(tonic, tonic), (tonic, interval)]
    for item in question_chords:
        self._play_chord(chord=item, duration=self.question_duration,
                         delay=self.question_delay)
    if self.question_pos_delay:
        self._wait(self.resolution_pos_delay)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="birdears.HarmonicIntervalQuestion.play_resolution">
    <p>def <span class="ident">play_resolution</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-birdears.HarmonicIntervalQuestion.play_resolution', this);">Show source &equiv;</a></p>
  <div id="source-birdears.HarmonicIntervalQuestion.play_resolution" class="source">
    <pre><code>def play_resolution(self):
    tonic = self.concrete_tonic
    for tone in self.resolution_pitch:
        self._play_chord(chord=[tonic, tone],
                         duration=self.resolution_duration,
                         delay=self.resolution_delay)
    if self.resolution_pos_delay:
        self._wait(self.resolution_pos_delay)
</code></pre>
  </div>
</div>

  </div>
  
      </div>
      </div>
      
      <div class="item">
      <p id="birdears.Interval" class="name">class <span class="ident">Interval</span></p>
      
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-birdears.Interval', this);">Show source &equiv;</a></p>
  <div id="source-birdears.Interval" class="source">
    <pre><code>class Interval:

    def __init__(self, mode, tonic, octave, chromatic=None, n_octaves=None,
                 descending=None):
        """Chooses a chromatic interval for the question.
        """

        global DIATONIC_MODES, CHROMATIC_TYPE, MAX_SEMITONES_RESOLVE_BELOW
        global INTERVALS

        diatonic_mode = list(DIATONIC_MODES[mode])

        if descending:
            diatonic_mode = [12 - x for x in diatonic_mode]
            diatonic_mode.reverse()

        step_network = diatonic_mode
        chromatic_network = list(CHROMATIC_TYPE)

        # FIXME: please refactore this with method signature n_octaves=1:
        if n_octaves:
            for i in range(1, n_octaves):
                step_network.extend([semitones + 12 * i for semitones in
                                     diatonic_mode[1:]])
                chromatic_network.extend([semitones + 12 * i for semitones in
                                          CHROMATIC_TYPE[1:]])
        else:
            n_octaves = 1

        if not chromatic:
            semitones = choice(step_network)
        else:
            semitones = choice(chromatic_network)

        chromatic_scale = Scale(tonic=tonic, octave=None, chromatic=True,
                                n_octaves=n_octaves, descending=descending)

        chromatic_scale_pitch = Scale(tonic=tonic, octave=octave,
                                      chromatic=True, n_octaves=n_octaves,
                                      descending=descending)


        distance = dict({
            'octaves': 0 if (semitones < 12) else int(semitones / 12),
            'semitones': semitones if (semitones < 12) else int(semitones % 12)
        })
        # chromatic_offset = semitones if semitones < 12 else semitones % 12
        chromatic_offset = distance['semitones']

        note_name = "{}".format(chromatic_scale.scale[semitones])
        note_and_octave = "{}".format(chromatic_scale_pitch.scale[semitones])


        is_chromatic = True if chromatic_offset not in diatonic_mode else False

        if is_chromatic:
            # here we are rounding it to the next diatonic degree, to insert
            # it after:
            if chromatic_offset <= MAX_SEMITONES_RESOLVE_BELOW:
                diatonic_index = diatonic_mode.index(chromatic_offset - 1)
            else:
                diatonic_index = diatonic_mode.index(chromatic_offset + 1)
        else:
            diatonic_index = diatonic_mode.index(chromatic_offset)

        if not descending:
            interval_octave = int(octave) + distance['octaves']
        else:
            interval_octave = int(octave) - distance['octaves']

        self.interval_data = dict({
            'tonic_octave': octave,
            'interval_octave': interval_octave,
            'chromatic_offset': chromatic_offset,
            'note_and_octave': note_and_octave,
            'note_name': note_name,
            'semitones': semitones,
            'is_chromatic': is_chromatic,
            'is_descending': False if not descending else True,
            'diatonic_index': diatonic_index,
            'distance': distance,
            'data': INTERVALS[semitones],
        })
</code></pre>
  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#birdears.Interval">Interval</a></li>
          <li>builtins.object</li>
          </ul>
          <h3>Methods</h3>
            
  <div class="item">
    <div class="name def" id="birdears.Interval.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, mode, tonic, octave, chromatic=None, n_octaves=None, descending=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Chooses a chromatic interval for the question.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-birdears.Interval.__init__', this);">Show source &equiv;</a></p>
  <div id="source-birdears.Interval.__init__" class="source">
    <pre><code>def __init__(self, mode, tonic, octave, chromatic=None, n_octaves=None,
             descending=None):
    """Chooses a chromatic interval for the question.
    """
    global DIATONIC_MODES, CHROMATIC_TYPE, MAX_SEMITONES_RESOLVE_BELOW
    global INTERVALS
    diatonic_mode = list(DIATONIC_MODES[mode])
    if descending:
        diatonic_mode = [12 - x for x in diatonic_mode]
        diatonic_mode.reverse()
    step_network = diatonic_mode
    chromatic_network = list(CHROMATIC_TYPE)
    # FIXME: please refactore this with method signature n_octaves=1:
    if n_octaves:
        for i in range(1, n_octaves):
            step_network.extend([semitones + 12 * i for semitones in
                                 diatonic_mode[1:]])
            chromatic_network.extend([semitones + 12 * i for semitones in
                                      CHROMATIC_TYPE[1:]])
    else:
        n_octaves = 1
    if not chromatic:
        semitones = choice(step_network)
    else:
        semitones = choice(chromatic_network)
    chromatic_scale = Scale(tonic=tonic, octave=None, chromatic=True,
                            n_octaves=n_octaves, descending=descending)
    chromatic_scale_pitch = Scale(tonic=tonic, octave=octave,
                                  chromatic=True, n_octaves=n_octaves,
                                  descending=descending)
    distance = dict({
        'octaves': 0 if (semitones < 12) else int(semitones / 12),
        'semitones': semitones if (semitones < 12) else int(semitones % 12)
    })
    # chromatic_offset = semitones if semitones < 12 else semitones % 12
    chromatic_offset = distance['semitones']
    note_name = "{}".format(chromatic_scale.scale[semitones])
    note_and_octave = "{}".format(chromatic_scale_pitch.scale[semitones])
    is_chromatic = True if chromatic_offset not in diatonic_mode else False
    if is_chromatic:
        # here we are rounding it to the next diatonic degree, to insert
        # it after:
        if chromatic_offset <= MAX_SEMITONES_RESOLVE_BELOW:
            diatonic_index = diatonic_mode.index(chromatic_offset - 1)
        else:
            diatonic_index = diatonic_mode.index(chromatic_offset + 1)
    else:
        diatonic_index = diatonic_mode.index(chromatic_offset)
    if not descending:
        interval_octave = int(octave) + distance['octaves']
    else:
        interval_octave = int(octave) - distance['octaves']
    self.interval_data = dict({
        'tonic_octave': octave,
        'interval_octave': interval_octave,
        'chromatic_offset': chromatic_offset,
        'note_and_octave': note_and_octave,
        'note_name': note_name,
        'semitones': semitones,
        'is_chromatic': is_chromatic,
        'is_descending': False if not descending else True,
        'diatonic_index': diatonic_index,
        'distance': distance,
        'data': INTERVALS[semitones],
    })
</code></pre>
  </div>
</div>

  </div>
  
          <h3>Instance properties</h3>
            <div class="item">
            <p id="birdears.Interval.interval_data" class="name">var <span class="ident">interval_data</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
      </div>
      </div>
      
      <div class="item">
      <p id="birdears.MelodicIntervalQuestion" class="name">class <span class="ident">MelodicIntervalQuestion</span></p>
      
  
    <div class="desc"><p>Base Class to be subclassed for Question classes.</p>
<p>This class implements attributes and routines to be used in Question
subclasses.</p>
<h2>Attributes</h2>
<p>notes : list
        list of notes and enharmonics to be used by the class</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-birdears.MelodicIntervalQuestion', this);">Show source &equiv;</a></p>
  <div id="source-birdears.MelodicIntervalQuestion" class="source">
    <pre><code>class MelodicIntervalQuestion(QuestionBase):

    def __init__(self, mode='major', tonic=None, octave=None, descending=None,
                 chromatic=None, n_octaves=None, *args, **kwargs):

        super(MelodicIntervalQuestion, self).\
                __init__(mode=mode, tonic=tonic, octave=octave,
                         descending=descending, chromatic=chromatic,
                         n_octaves=n_octaves, *args, **kwargs)
</code></pre>
  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#birdears.MelodicIntervalQuestion">MelodicIntervalQuestion</a></li>
          <li><a href="#birdears.QuestionBase">QuestionBase</a></li>
          <li>builtins.object</li>
          </ul>
          <h3>Methods</h3>
            
  <div class="item">
    <div class="name def" id="birdears.MelodicIntervalQuestion.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, mode=&#39;major&#39;, tonic=None, octave=None, descending=None, chromatic=None, n_octaves=None, *args, **kwargs)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#birdears.QuestionBase">QuestionBase</a></code>.<code><a href="#birdears.QuestionBase.__init__">__init__</a></code>
    </p>

    
  
    <div class="desc inherited"><p>Initialize self.  See help(type(self)) for accurate signature.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-birdears.MelodicIntervalQuestion.__init__', this);">Show source &equiv;</a></p>
  <div id="source-birdears.MelodicIntervalQuestion.__init__" class="source">
    <pre><code>def __init__(self, mode='major', tonic=None, octave=None, descending=None,
             chromatic=None, n_octaves=None, *args, **kwargs):
    super(MelodicIntervalQuestion, self).\
            __init__(mode=mode, tonic=tonic, octave=octave,
                     descending=descending, chromatic=chromatic,
                     n_octaves=n_octaves, *args, **kwargs)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="birdears.MelodicIntervalQuestion.check_question">
    <p>def <span class="ident">check_question</span>(</p><p>self, user_input_char)</p>
    </div>
    

    
  
    <div class="desc"><p>Checks whether the given answer is correct.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-birdears.MelodicIntervalQuestion.check_question', this);">Show source &equiv;</a></p>
  <div id="source-birdears.MelodicIntervalQuestion.check_question" class="source">
    <pre><code>def check_question(self, user_input_char):
    """Checks whether the given answer is correct."""
    global INTERVALS
    semitones = self.keyboard_index.index(user_input_char)
    user_interval = INTERVALS[semitones][2]
    correct_interval = INTERVALS[self.interval['semitones']][2]
    response = {
        'is_correct': False,
        'user_interval': user_interval,
        'correct_interval': correct_interval,
    }
    if semitones == self.interval['semitones']:
        response.update({'is_correct': True})
    else:
        response.update({'is_correct': False})
    return response
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="birdears.MelodicIntervalQuestion.make_resolution">
    <p>def <span class="ident">make_resolution</span>(</p><p>self, chromatic, mode, tonic, interval, descending=None)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-birdears.MelodicIntervalQuestion.make_resolution', this);">Show source &equiv;</a></p>
  <div id="source-birdears.MelodicIntervalQuestion.make_resolution" class="source">
    <pre><code>def make_resolution(self, chromatic, mode, tonic, interval,
                    descending=None):
    global DIATONIC_MODES, MAX_SEMITONES_RESOLVE_BELOW
    resolution_pitch = []
    #diatonic_mode = DIATONIC_MODES[mode]
    scale_pitch = Scale(tonic=tonic, mode=mode,
                        octave=interval['interval_octave'],
                        #octave=interval['tonic_octave'],
                        descending=descending)
    self.res_scale = scale_pitch
    print(scale_pitch.scale)
    print(interval)
    if not chromatic:
        if interval['chromatic_offset'] <= MAX_SEMITONES_RESOLVE_BELOW:
            resolution_pitch = \
                scale_pitch.scale[:interval['diatonic_index'] + 1]
            resolution_pitch.reverse()
        else:
            resolution_pitch = \
                scale_pitch.scale[interval['diatonic_index']:]
    else:
        if interval['chromatic_offset'] <= MAX_SEMITONES_RESOLVE_BELOW:
            if interval['is_chromatic']:
                resolution_pitch.extend(
                    scale_pitch.scale[: interval['diatonic_index'] + 1])
                resolution_pitch.append(interval['note_and_octave'])
            else:
                resolution_pitch.extend(
                    scale_pitch.scale[: interval['diatonic_index'] + 1])
            resolution_pitch.reverse()
        else:
            if interval['is_chromatic']:
                resolution_pitch.append(interval['note_and_octave'])
            resolution_pitch.extend(
                scale_pitch.scale[interval['diatonic_index']:])
    # unisson and octave
    # if interval['semitones'] == 0:
    if interval['semitones'] == 0:
        resolution_pitch.append(scale_pitch.scale[0])
    elif interval['semitones'] % 12 == 0:
        # FIXME: multipe octaves
        #resolution_pitch.append(scale_pitch.scale[-1])
        #resolution_pitch.append(scale_pitch.scale[0])
        resolution_pitch.append("{}{}".format(tonic, interval['tonic_octave']))
    return resolution_pitch
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="birdears.MelodicIntervalQuestion.play_question">
    <p>def <span class="ident">play_question</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-birdears.MelodicIntervalQuestion.play_question', this);">Show source &equiv;</a></p>
  <div id="source-birdears.MelodicIntervalQuestion.play_question" class="source">
    <pre><code>def play_question(self):
    tonic = self.concrete_tonic
    interval = self.interval['note_and_octave']
    play_note = self._play_note
    play_note(note=tonic, duration=self.question_duration,
              delay=self.question_delay)
    play_note(note=interval, duration=self.question_duration, delay=0)
    if self.question_pos_delay:
        self._wait(self.resolution_pos_delay)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="birdears.MelodicIntervalQuestion.play_resolution">
    <p>def <span class="ident">play_resolution</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-birdears.MelodicIntervalQuestion.play_resolution', this);">Show source &equiv;</a></p>
  <div id="source-birdears.MelodicIntervalQuestion.play_resolution" class="source">
    <pre><code>def play_resolution(self):
    play_note = self._play_note
    for tone in self.resolution_pitch:
        play_note(note=tone, duration=self.resolution_duration,
                  delay=self.resolution_delay)
    if self.resolution_pos_delay:
        self._wait(self.resolution_pos_delay)
</code></pre>
  </div>
</div>

  </div>
  
      </div>
      </div>
      
      <div class="item">
      <p id="birdears.QuestionBase" class="name">class <span class="ident">QuestionBase</span></p>
      
  
    <div class="desc"><p>Base Class to be subclassed for Question classes.</p>
<p>This class implements attributes and routines to be used in Question
subclasses.</p>
<h2>Attributes</h2>
<p>notes : list
        list of notes and enharmonics to be used by the class</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-birdears.QuestionBase', this);">Show source &equiv;</a></p>
  <div id="source-birdears.QuestionBase" class="source">
    <pre><code>class QuestionBase:
    """
    Base Class to be subclassed for Question classes.

    This class implements attributes and routines to be used in Question
    subclasses.

    Attributes
    ----------
    notes : list
            list of notes and enharmonics to be used by the class

    """

    def __init__(self, mode='major', tonic=None, octave=None, descending=None,
                 chromatic=None, n_octaves=None, *args, **kwargs):

        global KEYBOARD_INDICES, KEYS

        self.question_duration = 2
        self.question_delay = 1.5
        self.question_pos_delay = 0

        self.resolution_duration = 2.5
        self.resolution_delay = 0.5
        self.resolution_pos_delay = 1

        self.mode = mode

        # self.octave = octave if octave else randrange(3, 5)
        self.octave = octave or randrange(3, 5)

        # FIXME: maybe this should go to __main__
        self.keyboard_index = KEYBOARD_INDICES['chromatic' if chromatic
                                               else 'diatonic'][self.mode]

        # FIXME
        # self.tonic = tonic if tonic else choice(KEYS)
        self.tonic = tonic or choice(KEYS)
        tonic = self.tonic

        diatonic_scale = Scale(tonic=tonic, mode=mode, octave=None,
                         descending=descending, n_octaves=n_octaves)
        chromatic_scale = Scale(tonic=tonic, octave=None, chromatic=True,
                          descending=descending, n_octaves=n_octaves)

        diatonic_scale_pitch = Scale(tonic=tonic, mode=mode, octave=self.octave,
                               descending=descending, n_octaves=n_octaves)
        chromatic_scale_pitch = Scale(tonic=tonic, octave=self.octave,
                                chromatic=True, descending=descending,
                                n_octaves=n_octaves)

        scales = dict({
            'diatonic': diatonic_scale,
            'chromatic': chromatic_scale,
            'diatonic_pitch': diatonic_scale_pitch,
            'chromatic_pitch': chromatic_scale_pitch,
        })
        self.scales = scales

        self.concrete_tonic = scales['diatonic_pitch'].scale[0]
        self.scale_size = len(scales['diatonic'].scale)

        self.interval = Interval(mode=mode, tonic=tonic, octave=self.octave,
                                 chromatic=chromatic, n_octaves=n_octaves,
                                 descending=descending).interval_data
        # FIXME
        self.resolution_pitch = \
            self.make_resolution(chromatic=chromatic, mode=self.mode,
                                 tonic=tonic, interval=self.interval,
                                 descending=descending)

    def _wait(self, seconds):
        time.sleep(seconds)

    def _play_note(self, note, duration, delay):
        # requires sox to be installed

        command = (
            "play -qn synth {duration} pluck {note}"
            " fade l 0 {duration} 2 reverb"
        ).format(note=note, duration=duration)

        subprocess.Popen(command.split())

        if delay:
            self._wait(delay)

    def _play_chord(self, chord, duration, delay):

        for note in chord:
            self._play_note(note, duration=duration, delay=0)

        if delay:
            self._wait(delay)

    def play_question(self):

        tonic = self.concrete_tonic
        interval = self.interval['note_and_octave']

        play_note = self._play_note

        play_note(note=tonic, duration=self.question_duration,
                  delay=self.question_delay)
        play_note(note=interval, duration=self.question_duration, delay=0)

        if self.question_pos_delay:
            self._wait(self.resolution_pos_delay)

    def play_resolution(self):

        play_note = self._play_note

        for tone in self.resolution_pitch:
            play_note(note=tone, duration=self.resolution_duration,
                      delay=self.resolution_delay)

        if self.resolution_pos_delay:
            self._wait(self.resolution_pos_delay)

    def check_question(self, user_input_char):
        """Checks whether the given answer is correct."""

        global INTERVALS

        semitones = self.keyboard_index.index(user_input_char)

        user_interval = INTERVALS[semitones][2]
        correct_interval = INTERVALS[self.interval['semitones']][2]

        response = {
            'is_correct': False,
            'user_interval': user_interval,
            'correct_interval': correct_interval,
        }

        if semitones == self.interval['semitones']:
            response.update({'is_correct': True})

        else:
            response.update({'is_correct': False})

        return response

    def make_resolution(self, chromatic, mode, tonic, interval,
                        descending=None):

        global DIATONIC_MODES, MAX_SEMITONES_RESOLVE_BELOW

        resolution_pitch = []

        #diatonic_mode = DIATONIC_MODES[mode]

        scale_pitch = Scale(tonic=tonic, mode=mode,
                            octave=interval['interval_octave'],
                            #octave=interval['tonic_octave'],
                            descending=descending)
        self.res_scale = scale_pitch

        print(scale_pitch.scale)
        print(interval)

        if not chromatic:

            if interval['chromatic_offset'] <= MAX_SEMITONES_RESOLVE_BELOW:
                resolution_pitch = \
                    scale_pitch.scale[:interval['diatonic_index'] + 1]
                resolution_pitch.reverse()
            else:
                resolution_pitch = \
                    scale_pitch.scale[interval['diatonic_index']:]

        else:

            if interval['chromatic_offset'] <= MAX_SEMITONES_RESOLVE_BELOW:
                if interval['is_chromatic']:
                    resolution_pitch.extend(
                        scale_pitch.scale[: interval['diatonic_index'] + 1])
                    resolution_pitch.append(interval['note_and_octave'])
                else:
                    resolution_pitch.extend(
                        scale_pitch.scale[: interval['diatonic_index'] + 1])
                resolution_pitch.reverse()

            else:
                if interval['is_chromatic']:
                    resolution_pitch.append(interval['note_and_octave'])

                resolution_pitch.extend(
                    scale_pitch.scale[interval['diatonic_index']:])

        # unisson and octave
        # if interval['semitones'] == 0:
        if interval['semitones'] == 0:
            resolution_pitch.append(scale_pitch.scale[0])
        elif interval['semitones'] % 12 == 0:
            # FIXME: multipe octaves
            #resolution_pitch.append(scale_pitch.scale[-1])
            #resolution_pitch.append(scale_pitch.scale[0])
            resolution_pitch.append("{}{}".format(tonic, interval['tonic_octave']))

        return resolution_pitch
</code></pre>
  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#birdears.QuestionBase">QuestionBase</a></li>
          <li>builtins.object</li>
          </ul>
          <h3>Methods</h3>
            
  <div class="item">
    <div class="name def" id="birdears.QuestionBase.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, mode=&#39;major&#39;, tonic=None, octave=None, descending=None, chromatic=None, n_octaves=None, *args, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Initialize self.  See help(type(self)) for accurate signature.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-birdears.QuestionBase.__init__', this);">Show source &equiv;</a></p>
  <div id="source-birdears.QuestionBase.__init__" class="source">
    <pre><code>def __init__(self, mode='major', tonic=None, octave=None, descending=None,
             chromatic=None, n_octaves=None, *args, **kwargs):
    global KEYBOARD_INDICES, KEYS
    self.question_duration = 2
    self.question_delay = 1.5
    self.question_pos_delay = 0
    self.resolution_duration = 2.5
    self.resolution_delay = 0.5
    self.resolution_pos_delay = 1
    self.mode = mode
    # self.octave = octave if octave else randrange(3, 5)
    self.octave = octave or randrange(3, 5)
    # FIXME: maybe this should go to __main__
    self.keyboard_index = KEYBOARD_INDICES['chromatic' if chromatic
                                           else 'diatonic'][self.mode]
    # FIXME
    # self.tonic = tonic if tonic else choice(KEYS)
    self.tonic = tonic or choice(KEYS)
    tonic = self.tonic
    diatonic_scale = Scale(tonic=tonic, mode=mode, octave=None,
                     descending=descending, n_octaves=n_octaves)
    chromatic_scale = Scale(tonic=tonic, octave=None, chromatic=True,
                      descending=descending, n_octaves=n_octaves)
    diatonic_scale_pitch = Scale(tonic=tonic, mode=mode, octave=self.octave,
                           descending=descending, n_octaves=n_octaves)
    chromatic_scale_pitch = Scale(tonic=tonic, octave=self.octave,
                            chromatic=True, descending=descending,
                            n_octaves=n_octaves)
    scales = dict({
        'diatonic': diatonic_scale,
        'chromatic': chromatic_scale,
        'diatonic_pitch': diatonic_scale_pitch,
        'chromatic_pitch': chromatic_scale_pitch,
    })
    self.scales = scales
    self.concrete_tonic = scales['diatonic_pitch'].scale[0]
    self.scale_size = len(scales['diatonic'].scale)
    self.interval = Interval(mode=mode, tonic=tonic, octave=self.octave,
                             chromatic=chromatic, n_octaves=n_octaves,
                             descending=descending).interval_data
    # FIXME
    self.resolution_pitch = \
        self.make_resolution(chromatic=chromatic, mode=self.mode,
                             tonic=tonic, interval=self.interval,
                             descending=descending)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="birdears.QuestionBase.check_question">
    <p>def <span class="ident">check_question</span>(</p><p>self, user_input_char)</p>
    </div>
    

    
  
    <div class="desc"><p>Checks whether the given answer is correct.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-birdears.QuestionBase.check_question', this);">Show source &equiv;</a></p>
  <div id="source-birdears.QuestionBase.check_question" class="source">
    <pre><code>def check_question(self, user_input_char):
    """Checks whether the given answer is correct."""
    global INTERVALS
    semitones = self.keyboard_index.index(user_input_char)
    user_interval = INTERVALS[semitones][2]
    correct_interval = INTERVALS[self.interval['semitones']][2]
    response = {
        'is_correct': False,
        'user_interval': user_interval,
        'correct_interval': correct_interval,
    }
    if semitones == self.interval['semitones']:
        response.update({'is_correct': True})
    else:
        response.update({'is_correct': False})
    return response
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="birdears.QuestionBase.make_resolution">
    <p>def <span class="ident">make_resolution</span>(</p><p>self, chromatic, mode, tonic, interval, descending=None)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-birdears.QuestionBase.make_resolution', this);">Show source &equiv;</a></p>
  <div id="source-birdears.QuestionBase.make_resolution" class="source">
    <pre><code>def make_resolution(self, chromatic, mode, tonic, interval,
                    descending=None):
    global DIATONIC_MODES, MAX_SEMITONES_RESOLVE_BELOW
    resolution_pitch = []
    #diatonic_mode = DIATONIC_MODES[mode]
    scale_pitch = Scale(tonic=tonic, mode=mode,
                        octave=interval['interval_octave'],
                        #octave=interval['tonic_octave'],
                        descending=descending)
    self.res_scale = scale_pitch
    print(scale_pitch.scale)
    print(interval)
    if not chromatic:
        if interval['chromatic_offset'] <= MAX_SEMITONES_RESOLVE_BELOW:
            resolution_pitch = \
                scale_pitch.scale[:interval['diatonic_index'] + 1]
            resolution_pitch.reverse()
        else:
            resolution_pitch = \
                scale_pitch.scale[interval['diatonic_index']:]
    else:
        if interval['chromatic_offset'] <= MAX_SEMITONES_RESOLVE_BELOW:
            if interval['is_chromatic']:
                resolution_pitch.extend(
                    scale_pitch.scale[: interval['diatonic_index'] + 1])
                resolution_pitch.append(interval['note_and_octave'])
            else:
                resolution_pitch.extend(
                    scale_pitch.scale[: interval['diatonic_index'] + 1])
            resolution_pitch.reverse()
        else:
            if interval['is_chromatic']:
                resolution_pitch.append(interval['note_and_octave'])
            resolution_pitch.extend(
                scale_pitch.scale[interval['diatonic_index']:])
    # unisson and octave
    # if interval['semitones'] == 0:
    if interval['semitones'] == 0:
        resolution_pitch.append(scale_pitch.scale[0])
    elif interval['semitones'] % 12 == 0:
        # FIXME: multipe octaves
        #resolution_pitch.append(scale_pitch.scale[-1])
        #resolution_pitch.append(scale_pitch.scale[0])
        resolution_pitch.append("{}{}".format(tonic, interval['tonic_octave']))
    return resolution_pitch
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="birdears.QuestionBase.play_question">
    <p>def <span class="ident">play_question</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-birdears.QuestionBase.play_question', this);">Show source &equiv;</a></p>
  <div id="source-birdears.QuestionBase.play_question" class="source">
    <pre><code>def play_question(self):
    tonic = self.concrete_tonic
    interval = self.interval['note_and_octave']
    play_note = self._play_note
    play_note(note=tonic, duration=self.question_duration,
              delay=self.question_delay)
    play_note(note=interval, duration=self.question_duration, delay=0)
    if self.question_pos_delay:
        self._wait(self.resolution_pos_delay)
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="birdears.QuestionBase.play_resolution">
    <p>def <span class="ident">play_resolution</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-birdears.QuestionBase.play_resolution', this);">Show source &equiv;</a></p>
  <div id="source-birdears.QuestionBase.play_resolution" class="source">
    <pre><code>def play_resolution(self):
    play_note = self._play_note
    for tone in self.resolution_pitch:
        play_note(note=tone, duration=self.resolution_duration,
                  delay=self.resolution_delay)
    if self.resolution_pos_delay:
        self._wait(self.resolution_pos_delay)
</code></pre>
  </div>
</div>

  </div>
  
          <h3>Instance properties</h3>
            <div class="item">
            <p id="birdears.QuestionBase.concrete_tonic" class="name">var <span class="ident">concrete_tonic</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="birdears.QuestionBase.interval" class="name">var <span class="ident">interval</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="birdears.QuestionBase.keyboard_index" class="name">var <span class="ident">keyboard_index</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="birdears.QuestionBase.mode" class="name">var <span class="ident">mode</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="birdears.QuestionBase.octave" class="name">var <span class="ident">octave</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="birdears.QuestionBase.question_delay" class="name">var <span class="ident">question_delay</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="birdears.QuestionBase.question_duration" class="name">var <span class="ident">question_duration</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="birdears.QuestionBase.question_pos_delay" class="name">var <span class="ident">question_pos_delay</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="birdears.QuestionBase.resolution_delay" class="name">var <span class="ident">resolution_delay</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="birdears.QuestionBase.resolution_duration" class="name">var <span class="ident">resolution_duration</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="birdears.QuestionBase.resolution_pitch" class="name">var <span class="ident">resolution_pitch</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="birdears.QuestionBase.resolution_pos_delay" class="name">var <span class="ident">resolution_pos_delay</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="birdears.QuestionBase.scale_size" class="name">var <span class="ident">scale_size</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="birdears.QuestionBase.scales" class="name">var <span class="ident">scales</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="birdears.QuestionBase.tonic" class="name">var <span class="ident">tonic</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
      </div>
      </div>
      
      <div class="item">
      <p id="birdears.Scale" class="name">class <span class="ident">Scale</span></p>
      
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-birdears.Scale', this);">Show source &equiv;</a></p>
  <div id="source-birdears.Scale" class="source">
    <pre><code>class Scale:

    def __init__(self, tonic, mode=None, octave=None, n_octaves=None,
                 chromatic=None, descending=None, dont_repeat_tonic=None):

        if not chromatic:
            scale = self.get_diatonic(tonic=tonic, mode=mode, octave=octave,
                                      n_octaves=n_octaves,
                                      descending=descending,
                                      dont_repeat_tonic=dont_repeat_tonic)
        else:
            scale = self.get_chromatic(tonic=tonic, octave=octave,
                                       n_octaves=n_octaves,
                                       descending=descending,
                                       dont_repeat_tonic=dont_repeat_tonic)

        self.scale = scale
        self.chromatic = chromatic

    def get_chromatic(self, tonic, octave=None, n_octaves=None,
                      descending=None, dont_repeat_tonic=None):
        """Returns a chromatic scale from tonic.
        """

        global notes3, notes2

        tonic_index = self._get_chromatic_idx(tonic)

        if tonic == 'F' or 'b' in tonic:
            notes = deque(notes3)
        else:
            notes = deque(notes2)

        notes.rotate(-(tonic_index))

        if n_octaves:
            chromatic = notes * n_octaves
        else:
            chromatic = notes

        # FIXME: check if this works on descending
        if not dont_repeat_tonic:
            chromatic.append(chromatic[0])

        if descending:
            chromatic.reverse()

        if octave:
            chromatic = self._append_octave_to_scale(scale=chromatic,
                                                     starting_octave=octave,
                                                     descending=descending)

        return chromatic

    def get_diatonic(self, tonic, mode, octave=None, n_octaves=None,
                     descending=None, dont_repeat_tonic=None):
        """Returns a diatonic scale from tonic and mode.
        """

        global DIATONIC_MODES
        diatonic_mode = DIATONIC_MODES[mode]

        chromatic = self.get_chromatic(tonic)

        diatonic = [chromatic[semitones] for semitones in diatonic_mode[:-1]]

        if n_octaves:
            diatonic = diatonic * n_octaves

        # FIXME: check if this works on descending
        if not dont_repeat_tonic:
            diatonic.append(chromatic[diatonic_mode[-1]])

        if descending:
            diatonic.reverse()

        if octave:
            diatonic = self._append_octave_to_scale(scale=diatonic,
                                                    starting_octave=octave,
                                                    descending=descending)

        return diatonic

    def _append_octave_to_scale(self, scale, starting_octave, descending=None):
        """Inserts scientific octave number to the notes on a the given scale.
        """

        next_octave = 1 if not descending else -1

        scale_with_octave = []
        changing_note = None

        current_octave = starting_octave

        if not descending:
            for closest in ['C', 'C#', 'Db']:
                if closest in scale:
                    changing_note = closest
                    break
        else:
            for closest in ['B', 'Bb', 'A#']:
                if closest in scale:
                    changing_note = closest
                    break

        for idx, note in enumerate(scale):
            if idx > 0 and note == changing_note:
                current_octave += next_octave

            scale_with_octave.append("{}{}".format(note, current_octave))

        return scale_with_octave

    def _get_chromatic_idx(self, note):
        """Gets the chromatic index, ie., the distance in semitones of a given
        note from C.
        """

        global notes2, notes3

        use_flat = -1 if (note == 'F' or 'b' in note) else 0

        # FIXME
        if note in notes2:
            note_index = notes2.index(note)
        elif note in notes3:
            note_index = notes3.index(note)
        else:
            note_index = False

        return note_index
</code></pre>
  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#birdears.Scale">Scale</a></li>
          <li>builtins.object</li>
          </ul>
          <h3>Methods</h3>
            
  <div class="item">
    <div class="name def" id="birdears.Scale.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, tonic, mode=None, octave=None, n_octaves=None, chromatic=None, descending=None, dont_repeat_tonic=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Initialize self.  See help(type(self)) for accurate signature.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-birdears.Scale.__init__', this);">Show source &equiv;</a></p>
  <div id="source-birdears.Scale.__init__" class="source">
    <pre><code>def __init__(self, tonic, mode=None, octave=None, n_octaves=None,
             chromatic=None, descending=None, dont_repeat_tonic=None):
    if not chromatic:
        scale = self.get_diatonic(tonic=tonic, mode=mode, octave=octave,
                                  n_octaves=n_octaves,
                                  descending=descending,
                                  dont_repeat_tonic=dont_repeat_tonic)
    else:
        scale = self.get_chromatic(tonic=tonic, octave=octave,
                                   n_octaves=n_octaves,
                                   descending=descending,
                                   dont_repeat_tonic=dont_repeat_tonic)
    self.scale = scale
    self.chromatic = chromatic
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="birdears.Scale.get_chromatic">
    <p>def <span class="ident">get_chromatic</span>(</p><p>self, tonic, octave=None, n_octaves=None, descending=None, dont_repeat_tonic=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns a chromatic scale from tonic.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-birdears.Scale.get_chromatic', this);">Show source &equiv;</a></p>
  <div id="source-birdears.Scale.get_chromatic" class="source">
    <pre><code>def get_chromatic(self, tonic, octave=None, n_octaves=None,
                  descending=None, dont_repeat_tonic=None):
    """Returns a chromatic scale from tonic.
    """
    global notes3, notes2
    tonic_index = self._get_chromatic_idx(tonic)
    if tonic == 'F' or 'b' in tonic:
        notes = deque(notes3)
    else:
        notes = deque(notes2)
    notes.rotate(-(tonic_index))
    if n_octaves:
        chromatic = notes * n_octaves
    else:
        chromatic = notes
    # FIXME: check if this works on descending
    if not dont_repeat_tonic:
        chromatic.append(chromatic[0])
    if descending:
        chromatic.reverse()
    if octave:
        chromatic = self._append_octave_to_scale(scale=chromatic,
                                                 starting_octave=octave,
                                                 descending=descending)
    return chromatic
</code></pre>
  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="birdears.Scale.get_diatonic">
    <p>def <span class="ident">get_diatonic</span>(</p><p>self, tonic, mode, octave=None, n_octaves=None, descending=None, dont_repeat_tonic=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns a diatonic scale from tonic and mode.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-birdears.Scale.get_diatonic', this);">Show source &equiv;</a></p>
  <div id="source-birdears.Scale.get_diatonic" class="source">
    <pre><code>def get_diatonic(self, tonic, mode, octave=None, n_octaves=None,
                 descending=None, dont_repeat_tonic=None):
    """Returns a diatonic scale from tonic and mode.
    """
    global DIATONIC_MODES
    diatonic_mode = DIATONIC_MODES[mode]
    chromatic = self.get_chromatic(tonic)
    diatonic = [chromatic[semitones] for semitones in diatonic_mode[:-1]]
    if n_octaves:
        diatonic = diatonic * n_octaves
    # FIXME: check if this works on descending
    if not dont_repeat_tonic:
        diatonic.append(chromatic[diatonic_mode[-1]])
    if descending:
        diatonic.reverse()
    if octave:
        diatonic = self._append_octave_to_scale(scale=diatonic,
                                                starting_octave=octave,
                                                descending=descending)
    return diatonic
</code></pre>
  </div>
</div>

  </div>
  
          <h3>Instance properties</h3>
            <div class="item">
            <p id="birdears.Scale.chromatic" class="name">var <span class="ident">chromatic</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="birdears.Scale.scale" class="name">var <span class="ident">scale</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
      </div>
      </div>

  </section>

    </article>
  <div class="clear"> </div>
  <footer id="footer">
    <p>
      Documentation generated by
      <a href="https://github.com/BurntSushi/pdoc">pdoc 0.3.2</a>
    </p>

    <p>pdoc is in the public domain with the
      <a href="http://unlicense.org">UNLICENSE</a></p>

    <p>Design by <a href="http://nadh.in">Kailash Nadh</a></p>
  </footer>
</div>
</body>
</html>
